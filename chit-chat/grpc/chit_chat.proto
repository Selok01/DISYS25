syntax = "proto3";

option go_package = "/pb";


// ------ Server service -------

service sService {
  rpc Join (JoinRequest) returns (stream ServerReply);
  rpc Leave (LeaveRequest) returns (stream ServerReply);
  rpc Message(SendMessage) returns (stream ServerReply);
}

message JoinRequest
{
    int32 client_id = 1;
    VectorClock vec_clock = 2;
}

message LeaveRequest
{
    int32 client_id = 1;
    VectorClock vec_clock = 2;
}

message SendMessage
{
    int32 client_id = 1;
    VectorClock vec_clock = 2;
    string message = 3;
}

message ServerReply
{
   string ack = 1;
   VectorClock vec_clock = 2;
}

message VectorClock
{
    map<int32, int32> clock = 1;
}